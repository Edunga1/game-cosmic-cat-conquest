{"mappings":"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","sources":["src/game/core/Point.ts","src/game/mobile/Mobile.ts","src/game/space/Space.ts","src/game/Game.ts","src/App.ts"],"sourcesContent":["export default class Point {\n    constructor(\n        public x: number,\n        public y: number\n    ) {\n        this.x = x\n        this.y = y\n    }\n\n    static zero() {\n        return new Point(0, 0)\n    }\n\n    add(point: Point) {\n        return new Point(this.x + point.x, this.y + point.y)\n    }\n\n    subtract(point: Point) {\n        return new Point(this.x - point.x, this.y - point.y)\n    }\n\n    unit() {\n        const length = this.length()\n        return new Point(this.x / length, this.y / length)\n    }\n\n    length() {\n        return Math.sqrt(this.x * this.x + this.y * this.y)\n    }\n\n    multiply(scalar: number) {\n        return new Point(this.x * scalar, this.y * scalar)\n    }\n}\n\n","import Point from \"../core/Point\"\n\nexport default class Mobile {\n    position = Point.zero()\n    velocity = Point.zero()\n    elapsed = 0\n\n    constructor(\n        private context: CanvasRenderingContext2D\n    ) {\n    }\n\n    animate(delta: number) {\n        this.update(delta)\n        this.render()\n    }\n\n    private update(delta: number) {\n        this.elapsed += delta\n        this.position = this.position.add(this.velocity.multiply(delta / 5))\n    }\n\n    private render() {\n        this.context.save()\n        this.context.rotate(this.elapsed / 1000)\n        this.context.beginPath()\n        this.context.moveTo(0, -20)\n        this.context.lineTo(10, 10)\n        this.context.lineTo(0, 7)\n        this.context.lineTo(-10, 10)\n        this.context.lineTo(0, -20)\n        this.context.fillStyle = \"red\"\n        this.context.fill()\n        this.context.restore()\n    }\n}\n\n","import Point from \"../core/Point\"\n\nexport default class Space {\n    width: number\n    height: number\n    starElapsed = 0\n    backgroundColor = \"rgb(10, 10, 10)\"\n    starColorRange = 100\n    stars: Point[] = []\n    maxStars = 400\n\n    constructor(\n        private context: CanvasRenderingContext2D\n    ) {\n    }\n\n    animate(delta: number) {\n        this.render(delta)\n    }\n\n    private render(delta: number) {\n        this.renderBackground()\n        this.renderStars()\n\n        if (this.checkStarElapsed(delta)) {\n            this.updateStars()\n        }\n    }\n\n    private renderBackground() {\n        this.context.fillStyle = this.backgroundColor\n        this.context.fillRect(0, 0, this.width, this.height)\n    }\n\n    private renderStars() {\n        this.context.fillStyle = \"white\"\n        this.stars.forEach(star => {\n            this.context.fillRect(star.x, star.y, 1, 1)\n        })\n    }\n\n    private updateStars() {\n        this.stars = []\n        for (let i = 0; i < this.maxStars; i++) {\n            this.stars.push(new Point(\n                Math.random() * this.width,\n                Math.random() * this.height,\n            ))\n        }\n    }\n\n    private checkStarElapsed(delta: number) {\n        this.starElapsed += delta\n        if (this.starElapsed > 200) {\n            this.starElapsed = 0\n            return true\n        }\n        return false\n    }\n}\n","import Point from \"./core/Point\"\nimport Mobile from \"./mobile/Mobile\"\nimport Space from \"./space/Space\"\n\nexport default class Game {\n  width = 0\n  height = 0\n  lastTime = 0\n  delta = 0\n  space: Space\n  player: Mobile\n  enemies: Mobile[] = []\n\n  constructor(\n    private context: CanvasRenderingContext2D,\n  ) {\n    this.space = new Space(context)\n    this.player = new Mobile(context)\n\n    for (let i = 0; i < 10; i++) {\n      const enemy = new Mobile(context)\n      enemy.position.x = Math.random() * 1000 - 500\n      enemy.position.y = Math.random() * 1000 - 500\n      this.enemies.push(enemy)\n    }\n    console.log(this.player.position)\n    console.log(this.enemies[0].position)\n  }\n\n  resize(width: number, height: number) {\n    this.width = width\n    this.height = height\n    this.space.width = width\n    this.space.height = height\n  }\n\n  animate(time: number) {\n    this.updateDelta(time)\n    this.space.animate(this.delta)\n    this.updatePlayer()\n    this.updateEnemies()\n    this.context.restore()\n  }\n\n  movePlayer(x: number, y: number) {\n    const point = new Point(x, y)\n    const center = new Point(this.width / 2, this.height / 2)\n    const distance = center.subtract(point).unit()\n    this.player.velocity = distance\n  }\n\n  stopPlayer() {\n    this.player.velocity = Point.zero()\n  }\n\n  private updatePlayer() {\n    this.context.save()\n    this.context.translate(this.width / 2, this.height / 2)\n    this.player.animate(this.delta)\n    this.context.restore()\n  }\n\n  private updateEnemies() {\n    this.enemies.forEach(enemy => {\n      this.context.save()\n      this.context.translate(\n        this.width / 2 + this.player.position.x + enemy.position.x,\n        this.height / 2 + this.player.position.y + enemy.position.y,\n      )\n      enemy.animate(this.delta)\n      this.context.restore()\n    })\n  }\n\n  private updateDelta(time: number) {\n    this.delta = time - this.lastTime\n    this.lastTime = time\n  }\n}\n","import Game from \"./game/Game\"\n\nexport class App {\n    canvas: HTMLCanvasElement\n    context: CanvasRenderingContext2D\n    game: Game\n    width: number\n    height: number\n\n    constructor() {\n        this.canvas = document.createElement(\"canvas\")\n        this.context = this.canvas.getContext(\"2d\")!\n        this.game = new Game(this.context)\n    }\n\n    start() {\n        document.body.appendChild(this.canvas)\n        window.addEventListener(\"resize\", this.resize.bind(this))\n        this.registerCanvasEvents()\n        this.resize()\n        this.animate()\n    }\n\n    private animate(time = 0) {\n        this.game.animate(time)\n\n        requestAnimationFrame(this.animate.bind(this))\n    }\n\n    private resize() {\n        this.width = document.body.clientWidth\n        this.height = document.body.clientHeight\n        this.canvas.width = this.width\n        this.canvas.height = this.height\n\n        this.game.resize(this.width, this.height)\n    }\n\n    private registerCanvasEvents() {\n        this.canvas.addEventListener(\"mousedown\", this.onMouseDown.bind(this))\n        this.canvas.addEventListener(\"mousemove\", this.onMouseMove.bind(this))\n        this.canvas.addEventListener(\"mouseup\", this.onTouchEnd.bind(this))\n        this.canvas.addEventListener(\"touchstart\", this.onTouchStart.bind(this))\n        this.canvas.addEventListener(\"touchend\", this.onTouchEnd.bind(this))\n    }\n\n    private onMouseDown(event: MouseEvent) {\n        this.game.movePlayer(event.clientX, event.clientY)\n    }\n\n    private onMouseMove(event: MouseEvent) {\n        if (event.buttons === 0)\n            return\n        this.game.movePlayer(event.clientX, event.clientY)\n    }\n\n    private onTouchStart(event: TouchEvent) {\n        this.game.movePlayer(event.touches[0].clientX, event.touches[0].clientY)\n    }\n\n    private onTouchEnd() {\n        this.game.stopPlayer()\n    }\n}\n\nnew App().start()\n"],"names":["$1162b4d1b63bcb0b$export$2e2bcd8739ae039","constructor","x","y","this","static","add","point","subtract","unit","length","Math","sqrt","multiply","scalar","$73c3f5d8867f376c$export$2e2bcd8739ae039","context","position","zero","velocity","elapsed","animate","delta","update","render","save","rotate","beginPath","moveTo","lineTo","fillStyle","fill","restore","$f8daf18d7ca6e6d0$export$2e2bcd8739ae039","starElapsed","backgroundColor","starColorRange","stars","maxStars","renderBackground","renderStars","checkStarElapsed","updateStars","fillRect","width","height","forEach","star","i","push","random","$1d65543a723a8bec$export$2e2bcd8739ae039","lastTime","enemies","space","player","enemy","console","log","resize","time","updateDelta","updatePlayer","updateEnemies","movePlayer","distance","stopPlayer","translate","canvas","document","createElement","getContext","game","start","body","appendChild","window","addEventListener","bind","registerCanvasEvents","requestAnimationFrame","clientWidth","clientHeight","onMouseDown","onMouseMove","onTouchEnd","onTouchStart","event","clientX","clientY","buttons","touches"],"version":3,"file":"index.960c45b1.js.map"}